(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const t of n.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&u(t)}).observe(document,{childList:!0,subtree:!0});function h(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(o){if(o.ep)return;o.ep=!0;const n=h(o);fetch(o.href,n)}})();(function(){const l=d().websiteId;console.log("Gebruiker geladen:",l);function d(){for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++)if(t[e].getAttribute("websiteId"))return{websiteId:t[e].getAttribute("websiteId")};return{websiteId:null}}function h(){let t=document.getElementById("notification-area");return t||(t=document.createElement("div"),t.id="notification-area",document.body.appendChild(t)),t}(()=>{let t=history.pushState,e=history.replaceState,p=window.location.pathname+window.location.hash;history.pushState=function(s,r,i){let a=t.call(this,s,r,i);return f(),a},history.replaceState=function(s,r,i){let a=e.call(this,s,r,i);return f(),a},window.addEventListener("popstate",()=>{f()});function f(){let c=window.location.pathname+window.location.hash;p!==c&&(p=c,window.dispatchEvent(new Event("locationchange")))}})();function u(t){const e=t.target.closest(".notification");e&&(e.style.transform="translateX(100%)",setTimeout(()=>e.remove(),500),t instanceof MouseEvent&&t.stopPropagation())}function o(t,e,p,f,c,s){const r=h(),i=document.createElement("div");i.className="notification",i.style.transform="translateX(120%)",i.style.cursor="pointer",i.innerHTML=`
      ${t?`<img src="${t}">`:""}
      <div class="close--icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="15" height="15">
          <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>
        </svg>
      </div>
      <div class="content-wrapper">
        <div class="sender">${e}</div>
        <hr/>
        <div class="message">${p}</div>
      </div>
    `,i.addEventListener("click",function(m){m.target.closest(".close--icon")||(window.location.href=f)});const a=i.querySelector(".close--icon");a&&a.addEventListener("click",u),setTimeout(()=>{i.style.transform="translateX(0)"},s),r.appendChild(i),console.log(r.firstChild),setTimeout(()=>{u({target:i})},c+s)}const n=document.createElement("script");n.src="https://cdn.socket.io/4.0.0/socket.io.min.js",n.onload=function(){const t=io("https://flexnote-server.onrender.com");t.on("notification",function(e){console.log("Notificatie ontvangen:",e),h(),o(e.imgUrl,e.sender,e.message,e.link,e.showTimeInMs,e.delayInMs)}),t.on("connect",()=>{t.emit("userLocation",{websiteId:l,location:window.location.pathname}),window.addEventListener("locationchange",function(){let e=window.location.pathname+window.location.hash;console.log("Location changed to:",e),l&&t.emit("userLocation",{websiteId:l,location:e})})})},document.head.appendChild(n)})();
